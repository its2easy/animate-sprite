{"version":3,"file":"animate-sprite.esm.js","sources":["../src/merge-objects.js","../src/animate-sprite.js"],"sourcesContent":["/**\r\n * Object.assign polyfill\r\n *\r\n * @param {Object} target\r\n * @param {Object} firstSource\r\n * @returns {Object}\r\n */\r\nexport default function(target, firstSource) {\r\n    if (target === undefined || target === null) {\r\n        throw new TypeError('Cannot convert first argument to object');\r\n    }\r\n\r\n    var to = Object(target);\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var nextSource = arguments[i];\r\n        if (nextSource === undefined || nextSource === null) {\r\n            continue;\r\n        }\r\n\r\n        var keysArray = Object.keys(Object(nextSource));\r\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n            var nextKey = keysArray[nextIndex];\r\n            var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\r\n            if (desc !== undefined && desc.enumerable) {\r\n                to[nextKey] = nextSource[nextKey];\r\n            }\r\n        }\r\n    }\r\n    return to;\r\n}","import mergeObjects from './merge-objects'\r\n/**\r\n *\r\n * @param {HTMLElement} node - DOM Node\r\n * @param {Object} options - Options\r\n * @param {Number} options.width - Width of one frame\r\n * @param {Number} options.height - Height of one frame\r\n * @param {Number} options.frames - Number of frames\r\n * @param {Number|Boolean} [options.cols=false] - Number of cols if more than 1 row\r\n * @param {Boolean} [options.loop=false] - Whether to start a new cycle at the end\r\n * @param {Boolean} [options.reverse=false] - Reverse direction\r\n * @param {Boolean} [options.autoplay=false] - Autoplay\r\n * @param {Number|Boolean} [options.frameTime] - ms, time between frames\r\n * @param {Number|Boolean} [options.duration] - ms, total time, alternative to frameTime\r\n * @param {Number|Boolean} [options.fps = 24] - fps, alternative to frameTime\r\n * @param {Number|Boolean} [options.draggable = false] - Draggable by mouse or touch\r\n * @returns {Object}\r\n * @example\r\n *\r\n * var sprite = animateSprite.init( document.getElementById('sprite'),\r\n *             {\r\n *                 width: 720,\r\n *                 height: 405,\r\n *                 cols: 5,\r\n *                 frames: 20,\r\n *                 frameTime: 45,\r\n *                 loop: true\r\n *              }readme.md\r\n */\r\nexport function init(node, options = {}) {\r\n    if ( !(node instanceof HTMLElement || node instanceof Element || node instanceof HTMLDocument)) {\r\n        throw new TypeError('Node is required');\r\n    }\r\n\r\n    // Setup settings\r\n    let inlineSettings = fillInlineSettings( node,\r\n        ['width', 'height', 'frames', 'cols', 'loop', 'frameTime', 'duration', 'fps', 'reverse', 'autoplay', 'draggable']\r\n    );\r\n\r\n    let defaultSettings = {\r\n        width: 100,\r\n        height: 100,\r\n        frames: 24,\r\n        cols: false,\r\n        loop: false,\r\n        frameTime: false,\r\n        duration: false,\r\n        fps: 24,\r\n        reverse: false,\r\n        autoplay: false,\r\n        draggable: false\r\n    }\r\n    //let settings = Object.assign(defaultSettings, options, inlineSettings);\r\n    let settings = mergeObjects(defaultSettings, options, inlineSettings);\r\n\r\n    let currentFrame = 1,\r\n        isAnimating = false,\r\n        duration, // One animation cycle duration\r\n        lastUpdate,\r\n        isSwiping = false,\r\n        swipeObject = {},\r\n        swipeThreshold,\r\n        swipePixelsCorrection = 0,\r\n        nodeWidth,\r\n        nodeHeight,\r\n        widthHeightRatio,\r\n        bgWidth,\r\n        bgHeight,\r\n        plugin = {}; // Public object\r\n\r\n    const swipeEvents = ['mousedown', 'mousemove', 'mouseup', 'touchstart', 'touchmove', 'touchend', 'touchcancel'];\r\n\r\n    // Private functions\r\n    function animateSprite(frame) {\r\n        node.style.backgroundPosition = calculatePosition(frame);\r\n    }\r\n    function changeFrame(frame){\r\n        if ( frame === currentFrame ) return;\r\n        if ( !isOutOfRange(frame) ){ // Valid frame\r\n            animateSprite(frame);\r\n            checkForEvents(currentFrame, frame);\r\n            currentFrame = frame;\r\n        } else { // Out of range\r\n            if (settings.loop) { // Loop, change frame and continue\r\n                changeFrame( Math.abs(Math.abs(frame) - settings.frames) ); // Correct frame\r\n            } else { // No loop, stop playing\r\n                plugin.stop();\r\n                if (frame < 1) changeFrame(1);\r\n                else changeFrame(settings.frames);\r\n            }\r\n        }\r\n    }\r\n    function getNextFrame(deltaFrames, reverse){\r\n        if ( reverse === undefined ) reverse = settings.reverse;\r\n        return  (reverse) ? currentFrame - deltaFrames : currentFrame + deltaFrames;\r\n    }\r\n    function isOutOfRange(frame){\r\n        return ( frame <= 0 || frame > settings.frames );\r\n    }\r\n    function calculatePosition(frame){\r\n        let xPadding,\r\n            yPadding = 0;\r\n        if ( !settings.cols ){ // Single row sprite\r\n            xPadding = (frame - 1) * nodeWidth;\r\n        } else { // Multiline sprite\r\n            xPadding = ( ( (frame - 1) % settings.cols)  ) * nodeWidth;\r\n            yPadding = Math.floor( (frame - 1) / settings.cols ) * nodeHeight;\r\n        }\r\n        return `-${xPadding}px -${yPadding}px`;\r\n    }\r\n    function calculateDuration(frameTime, duration, fps){\r\n        if (frameTime) return frameTime * settings.frames;\r\n        else if (duration) return duration;\r\n        else return  ( settings.frames / fps ) * 1000;\r\n    }\r\n    function animate(time){\r\n        const progress = ( time - lastUpdate ) / duration;\r\n        //console.log(time - lastUpdate);\r\n        const deltaFrames = progress * settings.frames; // Ex. 0.45 or 1.25\r\n        // A place for timing function\r\n\r\n        if ( deltaFrames >= 1) { // Animate only if we need to update 1 frame or more\r\n            changeFrame(getNextFrame( Math.floor(deltaFrames) ));\r\n            lastUpdate = performance.now();\r\n        }\r\n        if ( isAnimating ) requestAnimationFrame(animate);\r\n    }\r\n\r\n    function calculateSizes(){\r\n        plugin.stop();\r\n        widthHeightRatio = settings.width / settings.height;\r\n        nodeWidth = node.offsetWidth;\r\n        nodeHeight = nodeWidth / widthHeightRatio;\r\n        node.style.height = nodeHeight + \"px\";\r\n        swipeThreshold = nodeWidth / settings.frames;\r\n        bgWidth =  ( !settings.cols )\r\n            ? settings.frames * nodeWidth\r\n            : settings.cols * nodeWidth;\r\n        bgHeight = ( !settings.cols )\r\n            ? nodeHeight\r\n            : Math.ceil( settings.frames / settings.cols ) * nodeHeight;\r\n        node.style.backgroundSize = `${bgWidth}px ${bgHeight}px`;\r\n        changeFrame(1);\r\n    }\r\n    function checkForEvents(prevFrame, nextFrame) {\r\n        if ( (prevFrame === settings.frames - 1) && (nextFrame === settings.frames) ){\r\n            node.dispatchEvent( new Event('sprite:last-frame') );\r\n        } else if ( (prevFrame === 2) && (nextFrame === 1) ) {\r\n            node.dispatchEvent( new Event('sprite:first-frame') );\r\n        }\r\n    }\r\n    function initPlugin(){\r\n        duration = calculateDuration(settings.frameTime, settings.duration, settings.fps);\r\n        lastUpdate = performance.now();\r\n\r\n        calculateSizes();\r\n        addResizeHandler(calculateSizes);\r\n\r\n        if ( settings.autoplay ) plugin.play();\r\n        if ( settings.draggable ) {\r\n            setupSwipeEvents(node, swipeHandler, swipeEvents);\r\n            node.style.cursor = 'grab';\r\n        }\r\n    }\r\n\r\n    //===================== SWIPE ROTATION ====================//\r\n    function swipeHandler(event){\r\n        let touches;\r\n        if ( event.touches !== undefined && event.touches.length ) touches = event.touches;\r\n        swipeObject.curX = (touches) ? touches[0].pageX : event.clientX;\r\n        swipeObject.curY = (touches) ? touches[0].pageY : event.clientY;\r\n\r\n        switch (event.type){\r\n            case 'mousedown':\r\n            case 'touchstart':\r\n                if ( event.type === 'touchstart') event.preventDefault();\r\n                document.addEventListener('mouseup', swipeHandler);\r\n                document.addEventListener('mousemove', swipeHandler);\r\n                swipeStart();\r\n                break;\r\n            case 'mousemove':\r\n            case 'touchmove':\r\n                if ( event.type === 'touchmove') event.preventDefault();\r\n                if ( isSwiping ) swipeMove();\r\n                break;\r\n            case 'mouseup':\r\n            case 'touchend':\r\n            case 'touchcancel':\r\n                if ( event.type === 'touchend' || event.type === 'touchcancel') event.preventDefault();\r\n                document.removeEventListener('mouseup', swipeHandler);\r\n                document.removeEventListener('mousemove', swipeHandler);\r\n                swipeEnd();\r\n                break;\r\n        }\r\n    }\r\n    function swipeStart(){\r\n        isAnimating = false;\r\n        isSwiping = true;\r\n        node.style.cursor = 'grabbing';\r\n        document.body.style.cursor = 'grabbing';\r\n        swipeObject.prevX = swipeObject.curX;\r\n        swipeObject.prevY = swipeObject.curY;\r\n    }\r\n    function swipeMove(){\r\n        const direction = swipeDirection();\r\n        swipeObject.prevY = swipeObject.curY; // Update Y to get right angle\r\n\r\n        const swipeLength = Math.round( Math.abs(swipeObject.curX - swipeObject.prevX) ) + swipePixelsCorrection;\r\n        if ( swipeLength <= swipeThreshold) return; // Ignore if less than 1 frame\r\n        if ( direction !== 'left' && direction !== 'right') return; // Ignore vertical directions\r\n        swipeObject.prevX = swipeObject.curX;\r\n\r\n        const progress = swipeLength / nodeWidth;\r\n        const deltaFrames = Math.floor(progress * settings.frames);\r\n        // Add pixels to the next swipeMove if frames equivalent of swipe is not an integer number,\r\n        // e.g one frame is 10px, swipeLength is 13px, we change 1 frame and add 3px to the next swipe,\r\n        // so fullwidth swipe is always rotate sprite for 1 turn\r\n        swipePixelsCorrection = swipeLength - (swipeThreshold * deltaFrames);\r\n        changeFrame(getNextFrame( deltaFrames, (direction !== 'left') ));\r\n    }\r\n    function swipeEnd(){\r\n        //if ( swipeObject.curX === undefined ) return; // there is no x coord on touch end\r\n        swipeObject = {};\r\n        isSwiping = false;\r\n        node.style.cursor = 'grab';\r\n        document.body.style.cursor = 'default';\r\n    }\r\n    function swipeDirection(){\r\n        let xDist, yDist, r, swipeAngle;\r\n        xDist = swipeObject.prevX - swipeObject.curX;\r\n        yDist = swipeObject.prevY - swipeObject.curY;\r\n        r = Math.atan2(yDist, xDist);\r\n        swipeAngle = Math.round(r * 180 / Math.PI);\r\n        if (swipeAngle < 0) swipeAngle = 360 - Math.abs(swipeAngle);\r\n        if ( (swipeAngle >= 0 && swipeAngle <= 60) || (swipeAngle <= 360 && swipeAngle >= 300 )) return 'left';\r\n        else if ( swipeAngle >= 120 && swipeAngle <= 240 ) return 'right';\r\n        else if ( swipeAngle >= 241 && swipeAngle <= 299 ) return 'bottom';\r\n        else return 'up';\r\n    }\r\n    //===================== END SWIPE ====================//\r\n\r\n    // Public API\r\n    plugin.play = function(){\r\n        if ( isAnimating ) return;\r\n        isAnimating = true;\r\n        lastUpdate = performance.now();\r\n        requestAnimationFrame(animate);\r\n        return this;\r\n    }\r\n    plugin.stop = function(){\r\n        isAnimating = false;\r\n        return this;\r\n    }\r\n    plugin.toggle = function(){\r\n        if ( !isAnimating ) plugin.play();\r\n        else plugin.stop();\r\n        return this;\r\n    }\r\n    plugin.next = function(){\r\n        plugin.stop();\r\n        changeFrame( currentFrame + 1 );\r\n        return this;\r\n    }\r\n    plugin.prev = function(){\r\n        plugin.stop();\r\n        changeFrame( currentFrame - 1 );\r\n        return this;\r\n    }\r\n    plugin.reset = function(){\r\n        plugin.stop();\r\n        changeFrame(1);\r\n        return this;\r\n    }\r\n    plugin.setFrame = function(frame){\r\n        plugin.stop();\r\n        changeFrame(frame);\r\n        return this;\r\n    }\r\n    plugin.setReverse = function(reverse = true){\r\n        settings.reverse = !!reverse;\r\n        return this;\r\n    }\r\n    plugin.getCurrentFrame = () => currentFrame;\r\n    plugin.isAnimating = () => isAnimating;\r\n    plugin.setOption = function (option, value) {\r\n        if ( option === \"frameTime\" || option === \"duration\" || option === \"fps\" ) {\r\n            settings.frameTime = settings.duration = settings.fps = false; // Reset\r\n            settings[option] = +value;\r\n            duration = calculateDuration(settings.frameTime, settings.duration, settings.fps); // Recalculate\r\n            if ( isAnimating ) {\r\n                plugin.stop();\r\n                plugin.play();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    plugin.destroy = function () {\r\n        removeSwipeEvents( node, swipeHandler, swipeEvents );\r\n        removeResizeHandler( calculateSizes );\r\n    }\r\n\r\n    initPlugin();\r\n    return plugin;\r\n}\r\n\r\n/**\r\n * Returns object with data-* settings\r\n *\r\n * @param {HTMLElement} node\r\n * @param {Array<string>} list\r\n * @returns {Object}\r\n */\r\nfunction fillInlineSettings(node, list) {\r\n    let result = {};\r\n    list.forEach( (value) => {\r\n        if (typeof node.dataset[value.toLowerCase()] !== 'undefined') {\r\n            let inlineValue = node.dataset[value.toLowerCase()];\r\n            if ( inlineValue === \"true\" || inlineValue === '') inlineValue = true;\r\n            else if ( inlineValue === \"false\") inlineValue = false;\r\n            result[value] = inlineValue;\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction addResizeHandler(cb) {\r\n    window.addEventListener(\"resize\", cb); // todo add debouncing\r\n}\r\nfunction removeResizeHandler(cb) {\r\n    window.removeEventListener(\"resize\", cb);\r\n}\r\n\r\nfunction setupSwipeEvents(node, swipeHandler, swipeEvents) {\r\n    swipeEvents.forEach( (value) => {\r\n        node.addEventListener(value, swipeHandler);\r\n    })\r\n}\r\nfunction removeSwipeEvents(node, swipeHandler, swipeEvents) {\r\n    swipeEvents.forEach( (value) => {\r\n        node.removeEventListener(value, swipeHandler);\r\n    })\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}