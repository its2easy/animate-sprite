/*!
 *  @its2easy/animate-sprite 1.1.1
 *  https://github.com/its2easy/animate-sprite
 *          
 *  Copyright (c) 2020 Dmitry Kovalev,
 *  Released under the MIT license
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("animateSprite",[],t):"object"==typeof exports?exports.animateSprite=t():e.animateSprite=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"init",(function(){return n}));function n(e,t={}){if(!(e instanceof HTMLElement||e instanceof Element||e instanceof HTMLDocument))throw new TypeError("Node is required");let r,n,o,u,a,s,c,i,f=function(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var u=Object.keys(Object(o)),a=0,s=u.length;a<s;a++){var c=u[a],i=Object.getOwnPropertyDescriptor(o,c);void 0!==i&&i.enumerable&&(r[c]=o[c])}}return r}({width:100,height:100,frames:24,cols:!1,loop:!1,frameTime:!1,duration:!1,fps:24,reverse:!1,autoplay:!1,draggable:!1},t,function(e,t){let r={};return t.forEach(t=>{if(void 0!==e.dataset[t.toLowerCase()]){let n=e.dataset[t.toLowerCase()];"true"===n||""===n?n=!0:"false"===n&&(n=!1),r[t]=n}}),r}(e,["width","height","frames","cols","loop","frameTime","duration","fps","reverse","autoplay","draggable"])),p=1,l=!1,m=!1,d={},h=0,v={};const y=["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function b(t){e.style.backgroundPosition=function(e){let t,r=0;f.cols?(t=(e-1)%f.cols*u,r=Math.floor((e-1)/f.cols)*a):t=(e-1)*u;return"-".concat(t,"px -").concat(r,"px")}(t)}function g(t){var r,n;t!==p&&(!function(e){return e<=0||e>f.frames}(t)?(b(t),n=t,(r=p)===f.frames-1&&n===f.frames?e.dispatchEvent(new Event("sprite:last-frame")):2===r&&1===n&&e.dispatchEvent(new Event("sprite:first-frame")),p=t):f.loop?g(Math.abs(Math.abs(t)-f.frames)):(v.stop(),g(t<1?1:f.frames)))}function w(e,t){return void 0===t&&(t=f.reverse),t?p-e:p+e}function E(e,t,r){return e?e*f.frames:t||f.frames/r*1e3}function M(e){const t=(e-n)/r*f.frames;t>=1&&(g(w(Math.floor(t))),n=performance.now()),l&&requestAnimationFrame(M)}function j(){const t=l;v.stop(),s=f.width/f.height,u=e.offsetWidth,a=u/s,e.style.height=a+"px",o=u/f.frames,c=f.cols?f.cols*u:f.frames*u,i=f.cols?Math.ceil(f.frames/f.cols)*a:a,e.style.backgroundSize="".concat(c,"px ").concat(i,"px"),t?v.play():g(1)}function x(t){let r;switch(void 0!==t.touches&&t.touches.length&&(r=t.touches),d.curX=r?r[0].pageX:t.clientX,d.curY=r?r[0].pageY:t.clientY,t.type){case"mousedown":case"touchstart":"touchstart"===t.type&&t.preventDefault(),document.addEventListener("mouseup",x),document.addEventListener("mousemove",x),l=!1,m=!0,e.style.cursor="grabbing",document.body.style.cursor="grabbing",d.prevX=d.curX,d.prevY=d.curY;break;case"mousemove":case"touchmove":"touchmove"===t.type&&t.preventDefault(),m&&function(){const e=function(){let e,t,r,n;e=d.prevX-d.curX,t=d.prevY-d.curY,r=Math.atan2(t,e),n=Math.round(180*r/Math.PI),n<0&&(n=360-Math.abs(n));return n>=0&&n<=60||n<=360&&n>=300?"left":n>=120&&n<=240?"right":n>=241&&n<=299?"bottom":"up"}();d.prevY=d.curY;const t=Math.round(Math.abs(d.curX-d.prevX))+h;if(t<=o)return;if("left"!==e&&"right"!==e)return;d.prevX=d.curX;const r=t/u,n=Math.floor(r*f.frames);h=t-o*n,g(w(n,"left"!==e))}();break;case"mouseup":case"touchend":case"touchcancel":"touchend"!==t.type&&"touchcancel"!==t.type||t.preventDefault(),document.removeEventListener("mouseup",x),document.removeEventListener("mousemove",x),d={},m=!1,e.style.cursor="grab",document.body.style.cursor="default"}}var O;return v.play=function(){if(!l)return l=!0,n=performance.now(),requestAnimationFrame(M),this},v.stop=function(){return l=!1,this},v.toggle=function(){return l?v.stop():v.play(),this},v.next=function(){return v.stop(),g(p+1),this},v.prev=function(){return v.stop(),g(p-1),this},v.reset=function(){return v.stop(),g(1),this},v.setFrame=function(e){return v.stop(),g(e),this},v.setReverse=function(e=!0){return f.reverse=!!e,this},v.getCurrentFrame=()=>p,v.isAnimating=()=>l,v.setOption=function(e,t){return"frameTime"!==e&&"duration"!==e&&"fps"!==e||(f.frameTime=f.duration=f.fps=!1,f[e]=+t,r=E(f.frameTime,f.duration,f.fps),l&&(v.stop(),v.play())),this},v.destroy=function(){var t;!function(e,t,r){r.forEach(r=>{e.removeEventListener(r,t)})}(e,x,y),t=j,window.removeEventListener("resize",t)},r=E(f.frameTime,f.duration,f.fps),n=performance.now(),j(),O=j,window.addEventListener("resize",O),f.autoplay&&v.play(),f.draggable&&(function(e,t,r){r.forEach(r=>{e.addEventListener(r,t)})}(e,x,y),e.style.cursor="grab"),v}}])}));